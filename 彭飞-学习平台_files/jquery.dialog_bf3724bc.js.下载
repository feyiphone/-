/*! ablejs - v0.2.0 - Monday, March 31st, 2025, 3:10:58 PM
* http://www.ablesky.com
* Copyright (c) 2025 frontend@ablesky.com; Licensed  */
!function(e){function t(){var t=this;this._onbox=!1,this._opening=!1,this.zIndex=1e4,this.length=function(){return a.length},this.open=function(e){if(t._opening=!0,"undefined"==typeof e&&(e={}),e.boxid)for(var n=0;n<a.length;n++)if(a[n].dh.attr("id")==e.boxid){a[n].close();break}e.zIndex=t.zIndex,t.zIndex+=10;var i=new o(e);return i.dh.click(function(){t._onbox=!0}),a.push(i),"center"!=i.options.position&&i.setElementPosition(),i.mh&&i.mh.css({width:i.bwidth(),height:i.bheight()}),i},this.close=function(){var e=this.getTopBox();0!=e&&e.close()},this.getTopBox=function(){return a.length>0?a[a.length-1]:!1},e(window).scroll(function(){if(a.length>0)for(i=0;i<a.length;i++){var e=a[i];"center"!=e.options.position&&e.setElementPosition(),e.mh&&e.mh.css({width:e.bwidth(),height:e.bheight()})}}).resize(function(){if(a.length>0){var e=t.getTopBox();e.mh&&e.mh.css({width:e.bwidth(),height:e.bheight()})}}),e(document).click(function(e){if(2==e.button)return!0;if(a.length>0){var n=t.getTopBox();t._opening||t._onbox||!n.options.clickClose||n.close()}t._opening=!1,t._onbox=!1})}var a=[],n=function(){for(var e,t=0;e=arguments[t];t++)if("string"==typeof e&&e.length>0)try{(new Image).src=e}catch(a){}};n(IMG_PATH+"/market/dialog/dialog-tl_eeac24e2.png",IMG_PATH+"/market/dialog/dialog-tr_1e88e489.png",IMG_PATH+"/market/dialog/dialog-bl_47bef4db.png",IMG_PATH+"/market/dialog/dialog-br_3879e159.png",IMG_PATH+"/market/dialog/dialog-square_9c60adba.png");var o=function(t){var n=this;this.options={},this.dh=null,this.mh=null,this.dc=null,this.df=null,this.db=null,this.selector=null,this.ajaxurl=null,this._dragging=!1,this._options=t||{},this._content=t.content||"",this.event={},this._defaults={boxid:null,boxclass:null,title:"",headStyle:"",bodyStyle:"",footStyle:"",width:0,height:0,timeout:0,draggable:!0,modal:!1,position:"center",buttons:[],clickClose:!1,zIndex:1e4,close:null,closeOnEscape:!0,open:null},this.initOptions=function(){n._options=n._options||{},n._options.title=n._options.title||"",n._options.boxclass=n._options.boxclass,n.options=e.extend({},n._defaults,n._options),n._options=null,n._defaults=null},this.initBox=function(){var t=['<div class="dialog-box">','<table class="dialog-table">',"<tr>",'<td class="td-tl"></td>','<td class="td-mm"></td>','<td class="td-tr"></td>',"</tr>","<tr>",'<td class="td-mm"></td>','<td class="td-content">','<div class="dialog-header">','<h3 class="dialog-title"></h3>','<a title="关闭" class="dialog-close">×</a>',"</div>",'<div class="dialog-content"></div>','<div class="dialog-button-container"></div>',"</td>",'<td class="td-mm"></td>',"</tr>","<tr>",'<td class="td-bl"></td>','<td class="td-mm"></td>','<td class="td-br"></td>',"</tr>","</table>","</div>"].join("");n.dh=e(t).appendTo("body").css({position:"absolute",zIndex:n.options.zIndex}),n.dc=n.find(".dialog-content"),n.dt=n.find(".dialog-title"),n.dr=n.find(".dialog-header"),n.db=n.find(".dialog-button-container"),n.options.boxid&&n.dh.attr("id",n.options.boxid),n.options.boxclass&&n.dh.addClass(n.options.boxclass),n.options.height>0&&n.dc.css("height",n.options.height),n.options.width>0&&n.dh.css("width",n.options.width),"object"==typeof n.options.headStyle&&n.dr.css(e.extend({},n.options.headStyle)),"object"==typeof n.options.bodyStyle&&n.dc.css(e.extend({},n.options.bodyStyle)),"object"==typeof n.options.bodyStyle&&n.db.css(e.extend({},n.options.footStyle)),n.dh.bgiframe()},this.initMask=function(){n.options.modal&&(e.browser.msie?(h="CSS1Compat"==document.compatMode?document.documentElement.clientHeight:document.body.clientHeight,w="CSS1Compat"==document.compatMode?document.documentElement.clientWidth:document.body.clientWidth):(h=n.bheight(),w=n.bwidth()),n.mh=e('<div class="dialog-mask"></div>').appendTo("body").css({width:w,height:h,zIndex:n.options.zIndex-1}).bgiframe())},this.initContent=function(){for(var t,a,i=n.options.buttons,o=0;a=i[o];o++)t=document.createElement("button"),t._click=a.click?a.click:n.close,e(t).attr("type","button").text(a.text).css(e.extend({},{backgroundColor:"#AAA",marginLeft:o>0?30:0},a.css)).click(function(e){e.preventDefault(),this._click()}),n.db.append(t);n.options.title?n.dt.html(n.options.title):n.dt.hide(),0===n.options.buttons.length&&n.dh.find(".dialog-button-container").hide(),n.setContent(n._content),n.show(),n.event.open()},this.initEvent=function(){n.dh.find(".dialog-close, .dialog-cancel").unbind("click").click(function(e){e.preventDefault(),n.close()}),n.dh.attr("tabIndex",-1).css("outline",0).keydown(function(e){n.options.closeOnEscape&&e.keyCode&&27===e.keyCode&&(n.close(e),e.preventDefault())}),n.options.timeout>0&&window.setTimeout(n.close,1e3*n.options.timeout),this.drag()},this.setOnclose=function(e){n.options.close=e},this.drag=function(){n.options.draggable&&n.options.title&&n.dr.css({cursor:"move"}).mousedown(function(t){var a=this,i=n.dh.position().left,o=n.dh.position().top,s=t.clientX,r=t.clientY,l=n.dh.width(),c=n.dh.height(),d=n.bwidth(),u=n.bheight();a.setCapture&&a.setCapture(),e(document).mousemove(function(e){window.getSelection?window.getSelection().removeAllRanges():document.selection.empty();var t=Math.max(i+e.clientX-s,0),a=Math.max(o+e.clientY-r,0),t=Math.min(t,d-l),a=Math.min(a,u-c);n.dh.css({left:t,top:a})}).mouseup(function(){a.releaseCapture&&a.releaseCapture(),e(document).unbind("mousemove"),e(document).unbind("mouseup")})})},this.event.open=function(){"function"==typeof n.options.open&&n.options.open(n)},this.show=function(){n.options.buttons.length>0&&n.dh.find(".dialog-button-container").show(),"center"==n.options.position?n.setCenterPosition():n.setElementPosition(),n.dh.show(),n.mh&&n.mh.show()},this.hide=function(e){n.dh.hide(e)},this.find=function(e){return n.dh.find(e)},this.setWidth=function(e){n.dh.width(e)},this.setTitle=function(e){n.dt.html(e)},this.getTitle=function(){return n.dt.html()},this.setContent=function(e){n.dc.html(e),n.setCenterPosition()},this.getContent=function(){return n.dc.html()},this.close=function(){for("function"==typeof n.options.close&&n.options.close(n),i=0;i<a.length;i++)if(a[i].dh.get(0)==n.dh.get(0)){a.splice(i,1);break}n.hide(),n.dh.remove(),n.mh&&n.mh.remove()},this.bheight=function(){if(e.browser.msie&&e.browser.version<7){var t=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight),a=Math.max(document.documentElement.offsetHeight,document.body.offsetHeight);return a>t?e(window).height():t}return e(document).height()},this.bwidth=function(){if(e.browser.msie&&e.browser.version<7){var t=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth),a=Math.max(document.documentElement.offsetWidth,document.body.offsetWidth);return a>t?e(window).width():t}return e(document).width()},this.setCenterPosition=function(){var t=e(window),a=e(document),i=a.scrollTop(),o=a.scrollLeft();i+=(t.height()-n.dh.height())/2,o+=(t.width()-n.dh.width())/2,0>i&&(i=0),n.dh.css({top:i,left:o})},this.setElementPosition=function(){var t=e(n.options.position.refele),a=n.options.position.reftop||0,i=n.options.position.refleft||0,o="undefined"==typeof n.options.position.adjust?!0:n.options.position.adjust,s=t.offset().top+t.height(),r=t.offset().left,l=document.documentElement.clientWidth||document.body.clientWidth,c=document.documentElement.clientHeight||document.body.clientHeight,d=document.documentElement.scrollTop||document.body.scrollTop,u=document.documentElement.scrollLeft||document.body.scrollLeft,p=d+c,h=u+l;o&&r+n.dh.width()>h&&(r=h-n.dh.width()-1),o&&s+n.dh.height()>p&&(s=p-n.dh.height()-1),r=Math.max(r+i,0),s=Math.max(s+a,0),n.dh.css({top:s,left:r})},this.initOptions(),this.initMask(),this.initBox(),this.initContent(),this.initEvent(),t.callback&&t.callback()};e.extend({dialog:(new t).open})}(jQuery),function(e){function t(e){return e&&e.constructor===Number?e+"px":e}e.fn.bgiframe=e.browser.msie&&/msie 6\.0/i.test(navigator.userAgent)?function(a){a=e.extend({top:"auto",left:"auto",width:"auto",height:"auto",opacity:!0,src:"javascript:false;"},a);var n='<iframe class="bgiframe"frameborder="0"tabindex="-1"src="'+a.src+'"'+'style="display:block;position:absolute;z-index:-1;'+(a.opacity!==!1?"filter:Alpha(Opacity='0');":"")+"top:"+("auto"==a.top?"expression(((parseInt(this.parentNode.currentStyle.borderTopWidth)||0)*-1)+'px')":t(a.top))+";"+"left:"+("auto"==a.left?"expression(((parseInt(this.parentNode.currentStyle.borderLeftWidth)||0)*-1)+'px')":t(a.left))+";"+"width:"+("auto"==a.width?"expression(this.parentNode.offsetWidth+'px')":t(a.width))+";"+"height:"+("auto"==a.height?"expression(this.parentNode.offsetHeight+'px')":t(a.height))+";"+'"/>';return this.each(function(){0===e(this).children("iframe.bgiframe").length&&this.insertBefore(document.createElement(n),this.firstChild)})}:function(){return this},e.fn.bgIframe=e.fn.bgiframe}(jQuery);